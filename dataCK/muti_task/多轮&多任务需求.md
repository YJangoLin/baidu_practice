## 多轮&多任务需求

数据： 范围（"IOT2ASR"）

环境：shc-java

多任务判别标识： "sequence"

单任务就是没有包含 "sequence"的



数据库表设计：

- botName
- type （single or Muti-task）
- task_num (任务数量)
- domain (已&分隔）
- intent  (已&分隔）
- date     
- task_count



```sql
use iot_smarthome_data_report;
CREATE TABLE smarthome_query_task (
    id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT 'id' ,
  	botName VARCHAR(64) COMMENT '设备名',
  	pk VARCHAR(64) COMMENT '设备编号',
  	task_type VARCHAR(64) COMMENT '任务类型：single-task 单任务 muti-task 多任务',
  	task_num INT(20) COMMENT '该query的任务数量， 单任务为1',    
  	domain VARCHAR(64) COMMENT 'domain， 多任务使用&连接',
  	intent VARCHAR(64) COMMENT 'intent， 多任务使用&连接',
    ts VARCHAR(64) COMMENT '日期， 精确到天',
    count INT(20) COMMENT '该任务在该天的重复数'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='多任务数据表';
```

问题：

- 如果一个query添加一跳数据的话，一天就72w左右，太多了，我能不能以天为单位统计每个单任务和多任务的数量来存储数据
- 这里有数据库管理的工具没？还是直接用代码去新建数据库表



任务一：统计单任务和多任务占比



任务二：统计多任务中sequence为2，3，4的query占比，同时要统计每对domain的占比(给出前10即可)





任务三：多轮

问题：多轮播如何去区分。





public List<Integer> relocateMarbles(int[] nums, int[] moveFrom, int[] moveTo) {

​        Set<Integer> direcSet = new HashSet<>();

​        Map<Integer, Integer> tf = new HashMap<>();

​        for (int i = 0; i < moveFrom.length; i++){

​            direcSet.put(moveFrom[i], moveTo[i]);

​        }

​        for (int i = 0; i < nums.length; i++){

​            if (tf.containsKey(nums[i]) && direcSet.contains(nums[i])){

​                direcSet.remove(nums[i]);

​                direcSet.add(tf.get(nums[i]));

​            } else if (tf.containsKey(nums[i]) && !direcSet.contains(nums[i])){

​                direcSet.add(tf.get(nums[i]));

​            }else if (!tf.containsKey(nums[i]) && !direcSet.contains(nums[i])){

​                direcSet.add(nums[i]);

​            }

​        }

​        List<Integer> list1 = new ArrayList<>(set);

​        return list1;

​    }





export PATH="/Users/liangzonglin/mac-bcecmd-0.4.6:$PATH"

sh src/compute_metrics/pull_online_query.sh 2024-06-11 data/yml 'ze0mpx' '229x9z0z' online rock_sweep data/log



sh src/compute_metrics/pull_online_query.sh 2024-06-11 data/yml 'z4863s' 'pgz3n0p6' online rock_sweep data/log







CREATE TABLE `example_table` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) NOT NULL,
  `description` TEXT,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='这是一个示例表';